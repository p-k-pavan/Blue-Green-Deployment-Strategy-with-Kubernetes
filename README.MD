# ğŸš€ Blue-Green Deployment Strategy with Kubernetes

This project demonstrates a **Blue-Green Deployment** strategy on Kubernetes with complete DevOps automation using Jenkins, SonarQube, Nexus, Docker, and more.

---

![Overview](image.png)


--- 

## ğŸ“ Clone the Repository

```bash
git clone https://github.com/<your-username>/Blue-Green-Deployment-Strategy-with-Kubernetes.git
cd Blue-Green-Deployment-Strategy-with-Kubernetes/cluster
```

---

## âš™ï¸ Configure Terraform
### Edit the terraform.tfvars file with your appropriate values:
```bash
vpc_cidr_block    = ""
subnet_cidr_block = ""
azs               = ""
key               = ""
```

---

## ğŸŒ Initialize & Apply Terraform

```bash
terraform init
terraform plan
terraform apply
```

---

## â˜¸ï¸ Install kubectl

### Follow the instructions to install kubectl:

[â¡ï¸ Install kubectl](https://github.com/p-k-pavan/Devops-Tools-Installation/tree/main/kubectl)

---

## ğŸ” Setup RBAC

### Refer to the RBAC configuration:

[ğŸ“„ Setup-RBAC.md](https://github.com/p-k-pavan/Blue-Green-Deployment-Strategy-with-Kubernetes/blob/main/Cluster/eks-rbac.md)

---

## ğŸ–¥ï¸ Setup Required Servers

### Provision 3 separate servers for the following:

- Jenkins
- SonarQube
- 

---
## ğŸ” SonarQube Setup

### On the SonarQube server:

```bash
sudo apt update
sudo apt install docker.io -y
sudo usermod -aG docker $USER && newgrp docker
```

### Run SonarQube using Docker:

[ğŸ”— SonarQube Setup Guide](https://github.com/p-k-pavan/Devops-Tools-Installation/tree/main/SonarQube)

---
## ğŸ“¦ Nexus Setup
### On the Nexus server:

```bash
sudo apt update
sudo apt install docker.io -y
sudo usermod -aG docker $USER && newgrp docker
```

### Run Nexus using Docker:

[ğŸ”— Nexus Setup Guide](https://github.com/p-k-pavan/Devops-Tools-Installation/tree/main/Nexus)

### To get the Nexus admin password:

```bash
docker exec -it nexus bash
cat nexus-data/admin.password
```

---

## ğŸ›  Jenkins Setup

### On the Jenkins server:

### Install Java 21:

- [ğŸ”— Java 21 Installation](https://github.com/p-k-pavan/Devops-Tools-Installation/tree/main/JAVA21)

### Install Jenkins:

- [ğŸ”— Jenkins Installation](https://github.com/p-k-pavan/Devops-Tools-Installation/tree/main/Jenkins)

### Access Jenkins at:

```bash
ğŸŒ http://<your-server-ip>:8080
```

---

## ğŸ” Security & DevOps Tools

### âœ… Install Trivy

[ğŸ”— Trivy Installation](https://github.com/p-k-pavan/Devops-Tools-Installation/tree/main/Trivy)

---

## ğŸ³ Install Docker on Jenkins Server

```bash
sudo usermod -aG docker $USER && newgrp docker
sudo usermod -aG docker jenkins && newgrp docker
sudo systemctl restart jenkins
```

---

## ğŸ”§ Jenkins Configuration

### ğŸ“¦ Plugins to Install

- Pipeline Stage View
- Docker Pipeline
- SonarQube Scanner
- Quality Gates
- Maven Integration
- JDK Installer
- Eclipse Integration
- Kubernetes
- Kubernetes CLI & API
- Kubernetes Credentials
- File Config Plugin

---

## ğŸ” Credentials to Add

- GitHub credentials
- SonarQube token
- DockerHub credentials
- EKS or kubeconfig token
- Nexus credentials (optional)

---

## ğŸ§° Tools to Add

- JDK (Java 17 or Java 21)
- Maven (latest version)
- SonarQube

---

## âš™ï¸ System Configuration

- Add SonarQube server URL and authentication token in Jenkins under System Configuration

---

## ğŸ§© Jenkins File & Nexus Configuration
### ğŸ“¥ Jenkins Maven File Configuration

- Open File Config Plugin in Jenkins
-  Add a Maven integration
- On line ~120: Uncomment Maven-related configs
- Add snapshot and release in jenkins config file

### Update Nexus URLs in GITHUB:

- pom.xml (on Jenkins)

---

## âœ… Final Step: Trigger the Jenkins Pipeline

### Run your Jenkins pipeline to execute full Blue-Green Deployment with CI/CD:

- âœ… Build

- âœ… Quality Scan with SonarQube

- âœ… Security Scan with Trivy

- âœ… Push artifacts to Nexus

- âœ… Deploy to Kubernetes (Blue/Green Deployment)

---

## ğŸ“Œ Notes

- Ensure Jenkins has access to the Kubernetes cluster using kubeconfig or EKS credentials.

- All tools must be correctly configured with tokens, URLs, and user credentials.

- You can optionally integrate GitOps for more advanced delivery workflows.